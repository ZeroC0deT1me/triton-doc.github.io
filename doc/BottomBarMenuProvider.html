<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BottomBarMenuProvider — Triton Framework</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Mono:ital,wght@0,300;0,400;0,500;1,400&family=Syne:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
  :root{--bg:#0b0d12;--surface:#111420;--surface2:#181c2b;--border:#232840;--accent:#4f8ef7;--accent2:#a78bfa;--warn:#f59e0b;--danger:#ef4444;--success:#22c55e;--text:#d4d8f0;--muted:#6b7280;--code-bg:#0d1117}
  *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
  html{scroll-behavior:smooth}
  body{font-family:'Syne',sans-serif;background:var(--bg);color:var(--text);line-height:1.7;min-height:100vh}
  body::before{content:'';position:fixed;inset:0;background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E");pointer-events:none;z-index:0}
  .layout{display:grid;grid-template-columns:280px 1fr;min-height:100vh;position:relative;z-index:1}
  aside{position:sticky;top:0;height:100vh;overflow-y:auto;background:var(--surface);border-right:1px solid var(--border);padding:0 0 2rem;display:flex;flex-direction:column}
  .back-bar{display:flex;align-items:center;gap:.6rem;padding:1.1rem 1.5rem;border-bottom:1px solid var(--border);text-decoration:none;color:var(--muted);font-family:'DM Mono',monospace;font-size:.78rem;transition:color .15s,background .15s;flex-shrink:0}
  .back-bar:hover{color:var(--text);background:var(--surface2)}
  .sidebar-header{padding:1.6rem 1.5rem .5rem;flex-shrink:0}
  .sidebar-pkg{font-family:'DM Mono',monospace;font-size:.7rem;color:var(--muted);margin-bottom:.4rem}
  .sidebar-classname{font-size:1.1rem;font-weight:800;color:#fff;line-height:1.2}
  /* interface badge — green */
  .sidebar-kind{display:inline-block;margin-top:.5rem;font-family:'DM Mono',monospace;font-size:.67rem;font-weight:600;letter-spacing:.1em;text-transform:uppercase;border-radius:4px;padding:.15em .55em;color:var(--success);background:rgba(34,197,94,.1);border:1px solid rgba(34,197,94,.2)}
  nav{padding:1rem 1rem 0;flex:1}
  nav .nav-section{font-size:.65rem;font-weight:700;letter-spacing:.18em;text-transform:uppercase;color:var(--muted);padding:1rem .75rem .4rem;display:block}
  nav a{display:flex;align-items:center;gap:.5rem;padding:.4rem .75rem;border-radius:6px;color:#8b92b8;text-decoration:none;font-size:.84rem;font-family:'DM Mono',monospace;transition:all .15s;border-left:2px solid transparent}
  nav a:hover{color:var(--text);background:var(--surface2);border-left-color:var(--success)}
  main{padding:3.5rem 4rem 5rem;max-width:960px}
  .hero{margin-bottom:3.5rem;padding-bottom:2.5rem;border-bottom:1px solid var(--border)}
  /* green accent for interface pages */
  .hero-badge{display:inline-flex;align-items:center;gap:.5rem;font-size:.7rem;font-weight:600;letter-spacing:.15em;text-transform:uppercase;color:var(--success);background:rgba(34,197,94,.08);border:1px solid rgba(34,197,94,.2);border-radius:100px;padding:.32rem .9rem;margin-bottom:1.3rem;font-family:'DM Mono',monospace}
  .hero-badge::before{content:'';width:5px;height:5px;border-radius:50%;background:var(--success);animation:pulse 2s infinite}
  @keyframes pulse{0%,100%{opacity:1}50%{opacity:.3}}
  h1{font-size:2.5rem;font-weight:800;color:#fff;line-height:1.1;margin-bottom:.75rem;letter-spacing:-.01em}
  .hero-meta{display:flex;align-items:center;gap:1.5rem;flex-wrap:wrap;font-family:'DM Mono',monospace;font-size:.8rem;color:var(--muted);margin-bottom:1rem}
  .hero-meta code{background:rgba(255,255,255,.06);border:1px solid var(--border);border-radius:4px;padding:.1em .45em;color:#a5b4fc;font-size:.82em}
  .hero-desc{font-size:.975rem;color:var(--muted);font-family:'DM Mono',monospace;font-weight:300;line-height:1.85;max-width:660px}
  section{margin-bottom:3.5rem}
  h2{font-size:1.5rem;font-weight:700;color:#fff;margin-bottom:.5rem;display:flex;align-items:center;gap:.75rem}
  h2::after{content:'';flex:1;height:1px;background:var(--border)}
  h3{font-size:1.02rem;font-weight:600;color:#b8bfdf;margin:2rem 0 .75rem}
  p{color:var(--text);margin-bottom:1rem;font-size:.94rem;font-family:'DM Mono',monospace;font-weight:300;line-height:1.85}
  pre{background:var(--code-bg);border:1px solid var(--border);border-radius:10px;padding:1.5rem;overflow-x:auto;margin:1.25rem 0;position:relative}
  pre::before{content:attr(data-lang);position:absolute;top:.75rem;right:1rem;font-size:.63rem;font-weight:600;letter-spacing:.1em;text-transform:uppercase;color:var(--muted);font-family:'DM Mono',monospace}
  code{font-family:'DM Mono',monospace;font-size:.855rem;line-height:1.7}
  pre code{color:#e2e8f0}
  :not(pre)>code{background:rgba(255,255,255,.07);border:1px solid var(--border);border-radius:4px;padding:.1em .4em;font-size:.82em;color:#a5b4fc}
  .kw{color:#c084fc}.ty{color:#67e8f9}.str{color:#86efac}.cm{color:#4b5563;font-style:italic}.an{color:#fbbf24}.iface{color:#4ade80}
  .callout{border-radius:10px;padding:1.15rem 1.4rem;margin:1.4rem 0;border-left:3px solid;font-family:'DM Mono',monospace;font-size:.875rem;font-weight:300;line-height:1.75}
  .callout strong{font-weight:600;display:block;margin-bottom:.3rem;text-transform:uppercase;font-size:.68rem;letter-spacing:.12em}
  .callout-info{background:rgba(79,142,247,.08);border-color:var(--accent);color:#93b8fb}
  .callout-success{background:rgba(34,197,94,.08);border-color:var(--success);color:#86efac}
  .callout-warn{background:rgba(245,158,11,.08);border-color:var(--warn);color:#fcd34d}
  .data-table{width:100%;border-collapse:collapse;margin:1.4rem 0;font-family:'DM Mono',monospace;font-size:.84rem}
  .data-table th{text-align:left;font-size:.65rem;font-weight:700;letter-spacing:.15em;text-transform:uppercase;color:var(--muted);padding:.75rem 1rem;border-bottom:1px solid var(--border)}
  .data-table td{padding:.9rem 1rem;border-bottom:1px solid #1a1f30;color:var(--text);vertical-align:top}
  .data-table tr:last-child td{border-bottom:none}
  .data-table tr:hover td{background:var(--surface2)}
  /* method signature box */
  .method-sig{background:var(--surface2);border:1px solid var(--border);border-left:3px solid var(--success);border-radius:8px;padding:1rem 1.25rem;margin:1.4rem 0;font-family:'DM Mono',monospace;font-size:.9rem}
  .method-sig .ret{color:var(--accent2)}.method-sig .name{color:#fff;font-weight:600}
  aside::-webkit-scrollbar{width:4px}
  aside::-webkit-scrollbar-thumb{background:var(--border);border-radius:2px}
  @media(max-width:768px){.layout{grid-template-columns:1fr};aside{position:relative;height:auto};main{padding:2rem 1.5rem};h1{font-size:1.9rem}}
</style>
</head>
<body>
<div class="layout">
<aside>
  <a class="back-bar" href="../index.html"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg> All docs</a>
  <div class="sidebar-header">
    <div class="sidebar-pkg">shared</div>
    <div class="sidebar-classname">BottomBarMenuProvider</div>
    <span class="sidebar-kind">interface</span>
  </div>
  <nav>
    <span class="nav-section">Overview</span>
    <a href="#overview">Overview</a>
    <a href="#method">buildBottomBarMenu()</a>
    <span class="nav-section">Usage</span>
    <a href="#implementing">Implementing</a>
    <a href="#default-items">Default menu items</a>
    <a href="#returning-null">Returning null</a>
  </nav>
</aside>
<main>

  <div class="hero" id="overview">
    <div class="hero-badge">shared · interface</div>
    <h1>BottomBarMenuProvider</h1>
    <div class="hero-meta">
      <span>Package <code>shared</code></span>
      <span>Type <code>interface</code></span>
    </div>
    <p class="hero-desc">Optional interface for modules that want a custom right-click context menu on their bottom bar button. Modules that implement it provide their own <code>JPopupMenu</code>; modules that don't implement it receive the default menu automatically. The Triton shell always appends its standard items after a separator so default behaviour is always reachable.</p>
  </div>

  <section id="method">
    <h2>buildBottomBarMenu()</h2>
    <div class="method-sig">
      <span class="ret">JPopupMenu</span> <span class="name">buildBottomBarMenu</span>()
    </div>
    <p>Called by the bottom bar when the user right-clicks the module's button. Return a <code>JPopupMenu</code> populated with your custom items. The shell will append a separator followed by its standard items automatically — so <strong>do not add those yourself</strong>.</p>
    <table class="data-table">
      <thead><tr><th>Return value</th><th>Effect</th></tr></thead>
      <tbody>
        <tr><td>A <code>JPopupMenu</code> with items</td><td>Custom items shown first, then separator, then default items.</td></tr>
        <tr><td><code>null</code></td><td>Default menu shown with no custom items (same as not implementing the interface).</td></tr>
        <tr><td>Empty <code>new JPopupMenu()</code></td><td>Only the separator + default items are shown (custom section is present but empty — prefer returning <code>null</code>).</td></tr>
      </tbody>
    </table>
  </section>

  <section id="implementing">
    <h2>Implementing</h2>
    <p>Any class that extends <code>AbstractModule</code> can implement <code>BottomBarMenuProvider</code>. The bottom bar checks for the interface at registration time using <code>instanceof</code>.</p>
<pre data-lang="Java"><code><span class="kw">public class</span> <span class="ty">Main</span> <span class="kw">extends</span> <span class="ty">AbstractModule</span>
        <span class="kw">implements</span> <span class="iface">BottomBarMenuProvider</span> {

    <span class="an">@Override</span>
    <span class="kw">public</span> <span class="ty">JPopupMenu</span> <span class="fn">buildBottomBarMenu</span>() {
        <span class="ty">JPopupMenu</span> menu = <span class="kw">new</span> <span class="ty">JPopupMenu</span>();

        <span class="ty">JMenuItem</span> reload = <span class="kw">new</span> <span class="ty">JMenuItem</span>(<span class="str">"Reload Data"</span>);
        reload.<span class="fn">addActionListener</span>(e -> <span class="fn">reloadData</span>());
        menu.<span class="fn">add</span>(reload);

        <span class="ty">JMenuItem</span> export = <span class="kw">new</span> <span class="ty">JMenuItem</span>(<span class="str">"Export..."</span>);
        export.<span class="fn">addActionListener</span>(e -> <span class="fn">showExportDialog</span>());
        menu.<span class="fn">add</span>(export);

        <span class="cm">// Don't add separator or Close — the shell does that</span>
        <span class="kw">return</span> menu;
    }
}</code></pre>
    <div class="callout callout-success">
      <strong>Keep it focused</strong>
      Only add items that are specific to your module's functionality. Generic window management actions (Bring to Front, Hide, Pin, Close) are already in the default menu — duplicating them creates confusion.
    </div>
  </section>

  <section id="default-items">
    <h2>Default Menu Items</h2>
    <p>These items are always appended by the shell after your menu (separated by a divider). You never need to add them and should not attempt to replicate them:</p>
    <table class="data-table">
      <thead><tr><th>Item</th><th>Action</th></tr></thead>
      <tbody>
        <tr><td>Bring to Front</td><td>Requests focus and brings the module's window to front.</td></tr>
        <tr><td>Hide</td><td>Iconifies or hides the module window.</td></tr>
        <tr><td>Pin</td><td>Toggles always-on-top for the module window.</td></tr>
        <tr><td>Close</td><td>Closes the module and removes it from the bottom bar.</td></tr>
      </tbody>
    </table>
  </section>

  <section id="returning-null">
    <h2>Returning null</h2>
    <p>Returning <code>null</code> from <code>buildBottomBarMenu()</code> is explicitly supported and equivalent to not implementing the interface at all. Use it when your module conditionally wants custom items based on state, so you can return <code>null</code> in the cases where no extras are needed rather than maintaining an always-present but sometimes-empty menu.</p>
<pre data-lang="Java"><code><span class="an">@Override</span>
<span class="kw">public</span> <span class="ty">JPopupMenu</span> <span class="fn">buildBottomBarMenu</span>() {
    <span class="cm">// No custom items when nothing is loaded</span>
    <span class="kw">if</span> (currentDocument == <span class="kw">null</span>) <span class="kw">return null</span>;

    <span class="ty">JPopupMenu</span> m = <span class="kw">new</span> <span class="ty">JPopupMenu</span>();
    m.<span class="fn">add</span>(<span class="kw">new</span> <span class="ty">JMenuItem</span>(<span class="str">"Save"</span>));
    m.<span class="fn">add</span>(<span class="kw">new</span> <span class="ty">JMenuItem</span>(<span class="str">"Print..."</span>));
    <span class="kw">return</span> m;
}</code></pre>
    <div class="callout callout-warn">
      <strong>Thread safety</strong>
      <code>buildBottomBarMenu()</code> is called on the Swing EDT. Do not perform long-running operations inside it. If your menu items depend on background data, cache that data and build the menu from the cache.
    </div>
  </section>

</main>
</div>
</body>
</html>
